/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 2 10:12
*/
KISSY.add("anim",function(c,b,d){b.Easing=d;c.mix(c,{Anim:b,Easing:b.Easing});return b},{requires:["anim/base","anim/easing","anim/color","anim/backgroundPosition"]});
KISSY.add("anim/backgroundPosition",function(c,b,d,e){function g(a){a=a.replace(/left|top/g,"0px").replace(/right|bottom/g,"100%").replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");a=a.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(a[1]),a[2],parseFloat(a[3]),a[4]]}function a(){a.superclass.constructor.apply(this,arguments)}c.extend(a,e,{load:function(){a.superclass.load.apply(this,arguments);this.unit=["px","px"];if(this.from){var b=g(this.from);this.from=[b[0],b[2]]}else this.from=
[0,0];this.to?(b=g(this.to),this.to=[b[0],b[2]],this.unit=[b[1],b[3]]):this.to=[0,0]},interpolate:function(b,c,d){var e=this.unit,g=a.superclass.interpolate;return g(b[0],c[0],d)+e[0]+" "+g(b[1],c[1],d)+e[1]},cur:function(){return b.css(this.elem,"backgroundPosition")},update:function(){var a=this.prop,c=this.elem,d=this.interpolate(this.from,this.to,this.pos);b.css(c,a,d)}});return e.Factories.backgroundPosition=a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/base",function(c,b,d,e,g,a,s,f){function j(a,f,h,d,e){if(a=b.get(a)){if(!(this instanceof j))return new j(a,f,h,d,e);var f=c.isString(f)?c.unparam(""+f,";",":"):c.clone(f),u;for(u in f){var g=i(c.trim(u));u!=g&&(f[g]=f[u],delete f[u])}h=c.isPlainObject(h)?c.clone(h):{duration:parseFloat(h)||void 0,easing:d,complete:e};this.config=h=c.merge(z,h);h.duration*=1E3;this.elem=this.domEl=a;this.props=f;this._backupProps={};this._fxs={};this.on("complete",o)}}function o(a){var f,h=this.config;
c.isEmptyObject(f=this._backupProps)||b.css(this.elem,f);h.complete&&h.complete.call(this,a)}function k(){var f=this.config,d=this._backupProps,h=this.elem,j,l,i,n=f.specialEasing||{},o=this._fxs,k=this.props;p(this);if(!1===this.fire("start"))this.stop(0);else{if(x(h))for(i in j="none"===b.css(h,"display"),k)if(l=k[i],"hide"==l&&j||"show"==l&&!j){this.stop(1);return}c.each(k,function(a,b){if(k.hasOwnProperty(b)){var d;c.isArray(a)?(d=n[b]=a[1],k[b]=a[0]):d=n[b]=n[b]||f.easing;c.isString(d)&&(d=n[b]=
e[d]);n[b]=d||e.easeNone}});c.each(y,function(a,f){var d,i,e;if(e=k[f]){i={};c.each(a,function(a){i[a]=b.css(h,a);n[a]=n[f]});b.css(h,f,e);for(d in i)k[d]=b.css(h,d),b.css(h,d,i[d]);delete k[f]}});for(i in k)if(k.hasOwnProperty(i)){l=c.trim(k[i]);var q,r,m={elem:h,prop:i,duration:f.duration,easing:n[i]},t=s.getFx(m);c.inArray(l,A)?(d[i]=b.style(h,i),"toggle"==l&&(l=j?"show":"hide"),"hide"==l?(q=0,r=t.cur(),d.display="none"):(r=0,q=t.cur(),b.css(h,i,r),b.show(h)),l=q):(q=l,r=t.cur());l+="";var w="",
v=l.match(B);if(v){q=parseFloat(v[2]);if((w=v[3])&&"px"!==w)b.css(h,i,l),r*=q/t.cur(),b.css(h,i,r+w);v[1]&&(q=("-="===v[1]?-1:1)*q+r)}m.from=r;m.to=q;m.unit=w;t.load(m);o[i]=t}if(x(h)&&(k.width||k.height))c.mix(d,{overflow:b.style(h,"overflow"),"overflow-x":b.style(h,"overflowX"),"overflow-y":b.style(h,"overflowY")}),b.css(h,"overflow","hidden"),"inline"===b.css(h,"display")&&"none"===b.css(h,"float")&&(g.ie?b.css(h,"zoom",1):b.css(h,"display","inline-block"));a.start(this)}}function p(a){var f=a.elem,
d=b.data(f,m);d||b.data(f,m,d={});d[c.stamp(a)]=a}function n(a,d,h,i){h&&!1!==i&&f.removeQueue(a,i);var a=b.data(a,m),a=c.merge(a),e;for(e in a)h=a[e],h.config.queue==i&&h.stop(d)}var i=b._camelCase,x=b._isElementNode,A=["hide","show","toggle"],y={background:["backgroundPosition"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize",
"fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},z={duration:1,easing:"easeNone"},B=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;j.SHORT_HANDS=y;c.augment(j,d.Target,{isRunning:function(){var a=b.data(this.elem,m);return a?!!a[c.stamp(this)]:0},_runInternal:k,run:function(){!1===this.config.queue?k.call(this):f.queue(this);return this},_frame:function(){var a,b=this.config,f=1,d,c,i=this._fxs;for(a in i)if(i.hasOwnProperty(a)&&
!(c=i[a]).finished)b.frame&&(d=b.frame(c)),1==d||0==d?(c.finished=d,f&=d):f&=c.frame();(!1===this.fire("step")||f)&&this.stop(f)},stop:function(d){var i=this.config,e=i.queue,j,n,g=this._fxs;if(this.isRunning()){if(d){for(j in g)if(g.hasOwnProperty(j)&&!(n=g[j]).finished)i.frame?i.frame(n,1):n.frame(1);this.fire("complete")}a.stop(this);d=this.elem;if(i=b.data(d,m))delete i[c.stamp(this)],c.isEmptyObject(i)&&b.removeData(d,m);!1!==e&&f.dequeue(this);return this}!1!==e&&f.remove(this)}});var m=c.guid("ks-anim-unqueued-"+
c.now()+"-");j.stop=function(a,d,i,e){if(null===e||c.isString(e)||!1===e)return n.apply(void 0,arguments);i&&f.removeQueues(a);var j=b.data(a,m),j=c.merge(j),g;for(g in j)j[g].stop(d)};j.isRunning=function(a){return(a=b.data(a,m))&&!c.isEmptyObject(a)};j.Q=f;return j},{requires:"dom,event,./easing,ua,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(c,b,d,e){function g(a){var a=a+"",b;if(b=a.match(o))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=a.match(k))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=a.match(p)){for(a=1;a<b.length;a++)2>b[a].length&&(b[a]+=b[a]);return[parseInt(b[1],s),parseInt(b[2],s),parseInt(b[3],s)]}return j[a=a.toLowerCase()]?j[a]:[255,255,255]}function a(){a.superclass.constructor.apply(this,arguments)}var s=16,f=Math.floor,j={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},o=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,k=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,p=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,b=d.SHORT_HANDS;b.background=b.background||[];b.background.push("backgroundColor");
b.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");c.extend(a,e,{load:function(){a.superclass.load.apply(this,arguments);this.from&&(this.from=g(this.from));this.to&&(this.to=g(this.to))},interpolate:function(b,d,c){var e=
a.superclass.interpolate;if(3==b.length&&3==d.length)return"rgb("+[f(e(b[0],d[0],c)),f(e(b[1],d[1],c)),f(e(b[2],d[2],c))].join(", ")+")";if(4==b.length||4==d.length)return"rgba("+[f(e(b[0],d[0],c)),f(e(b[1],d[1],c)),f(e(b[2],d[2],c)),f(e(b[3]||1,d[3]||1,c))].join(", ")+")"}});c.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(b){e.Factories[b]=a});return a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var c=Math.PI,b=Math.pow,d=Math.sin,e=1.70158,g={swing:function(a){return-Math.cos(a*c)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:
-(b(2,10*(a-=1))*d((a-0.075)*2*c/0.3))},elasticOut:function(a){return 0===a||1===a?a:b(2,-10*a)*d((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*b(2,10*(a-=1))*d((a-0.1125)*2*c/0.45):0.5*b(2,-10*(a-=1))*d((a-0.1125)*2*c/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*((e+1)*a-e)},backOut:function(a){return(a-=1)*a*((e+1)*a+e)+1},backBoth:function(a){return 1>(a*=2)?0.5*a*a*(((e*=1.525)+1)*a-e):0.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},bounceIn:function(a){return 1-
g.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*g.bounceIn(2*a):0.5*g.bounceOut(2*a-1)+0.5}};return g});
KISSY.add("anim/fx",function(c,b,d){function e(a){this.load(a)}function g(a,c){return(!a.style||null==a.style[c])&&null!=b.attr(a,c,d,1)?1:0}c.augment(e,{load:function(a){c.mix(this,a);this.startTime=c.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var b=0;if(this.finished)return 1;var d=c.now();a||d>=this.duration+this.startTime?b=this.pos=1:(a=d-this.startTime,this.pos=this.easing(a/this.duration));this.update();this.finished=this.finished||b;return b},interpolate:function(a,b,f){return c.isNumber(a)&&
c.isNumber(b)?(a+(b-a)*f).toFixed(3):d},update:function(){var a=this.prop,c=this.elem,f=this.to,e=this.interpolate(this.from,f,this.pos);e===d?this.finished||(this.finished=1,b.css(c,a,f)):(e+=this.unit,g(c,a)?b.attr(c,a,e,1):b.css(c,a,e))},cur:function(){var a=this.prop,c=this.elem;if(g(c,a))return b.attr(c,a,d,1);var f,a=b.css(c,a);return isNaN(f=parseFloat(a))?!a||"auto"===a?0:a:f}});e.Factories={};e.getFx=function(a){return new (e.Factories[a.prop]||e)(a)};return e},{requires:["dom"]});
KISSY.add("anim/manager",function(c){var b=c.stamp;return{interval:15,runnings:{},timer:null,start:function(d){var c=b(d);this.runnings[c]||(this.runnings[c]=d,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(d){delete this.runnings[b(d)];c.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,c=this.runnings,g;for(g in c)c.hasOwnProperty(g)&&(b=0,c[g]._frame());return b}}});
KISSY.add("anim/queue",function(c,b){function d(c,d,e){var d=d||a,k,p=b.data(c,g);!p&&!e&&b.data(c,g,p={});p&&(k=p[d],!k&&!e&&(k=p[d]=[]));return k}function e(d,e){var e=e||a,o=b.data(d,g);o&&delete o[e];c.isEmptyObject(o)&&b.removeData(d,g)}var g=c.guid("ks-queue-"+c.now()+"-"),a=c.guid("ks-queue-"+c.now()+"-"),s={queueCollectionKey:g,queue:function(a){var b=d(a.elem,a.config.queue);b.push(a);"..."!==b[0]&&s.dequeue(a);return b},remove:function(a){var b=d(a.elem,a.config.queue,1);b&&(a=c.indexOf(a,
b),-1<a&&b.splice(a,1))},removeQueues:function(a){b.removeData(a,g)},removeQueue:e,dequeue:function(a){var b=a.elem,a=a.config.queue,c=d(b,a,1),g=c&&c.shift();"..."==g&&(g=c.shift());g?(c.unshift("..."),g._runInternal()):e(b,a)}};return s},{requires:["dom"]});
