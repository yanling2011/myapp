/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 7 16:45
*/
KISSY.add("component",function(f,d,b,a,e,h,j,i){return{Controller:d,Render:b,Container:a,UIStore:e,DelegateChildren:h,DecorateChild:i,DecorateChildren:j}},{requires:"component/controller,component/render,component/container,component/uistore,component/delegateChildren,component/decorateChildren,component/decorateChild".split(",")});KISSY.add("component/container",function(f,d,b,a,e,h){return d.create(b,[e,h],{})},{requires:["uibase","./controller","./uistore","./delegateChildren","./decorateChildren"]});
KISSY.add("component/controller",function(f,d,b,a,e){function h(g){return function(c){var c=c.newVal,a=this.get("view");a&&a.set(g,c)}}function j(g){return function(c){var a=this.get("view");return void 0===c?a&&a.get(g):c}}function i(g,c,a){g.create();var b=g.getContentElement();c.__set("parent",g);c.set("render",b);c.set("elBefore",a);g.get("rendered")?c.render():c.create()}function k(g,c){var a=g.relatedTarget;return a&&(a===c[0]||c.contains(a))}var l=b.create([b.Box],{getCssClassWithPrefix:a.getCssClassWithPrefix,
initializer:function(){var a=this.__attrs||{},c;for(c in a)if(a.hasOwnProperty(c)){var b=a[c];b.view&&(this.on("after"+f.ucfirst(c)+"Change",h(c)),b.getter=j(c))}},renderUI:function(){var a,c;this.get("view").render();var b=this.get("children");for(a=0;a<b.length;a++)c=b[a],i(this,c),c.render()},createDom:function(){var g;if(!(g=this.get("view"))){var c=this.constructor;g={};for(var b;c&&!b;)b=c.DefaultRender,c=c.superclass&&c.superclass.constructor;if(b){var c=this.__attrs||{},e;for(e in c)if(c.hasOwnProperty(e)){var d;
if(c[e].view&&void 0!==(d=this.get(e)))g[e]=d}g=new b(g)}else g=0}b=g;e=this.constructor;for(d=[];e&&e!=l;)(g=a.getCssClassByUIConstructor(e))&&d.push(g),e=e.superclass&&e.superclass.constructor;b.__componentClasses=d.join(" ");b.create();this.get("focusable")||b.get("el").unselectable(void 0);this.__set("view",b)},_uiSetHandleMouseEvents:function(a){var c=this.get("el");a?(c.on("mouseenter",this.handleMouseEnter,this),c.on("mouseleave",this.handleMouseLeave,this),c.on("mousedown",this.handleMouseDown,
this),c.on("mouseup",this.handleMouseUp,this),c.on("dblclick",this.handleDblClick,this)):(c.detach("mouseenter",this.handleMouseEnter,this),c.detach("mouseleave",this.handleMouseLeave,this),c.detach("mousedown",this.handleMouseDown,this),c.detach("mouseup",this.handleMouseUp,this),c.detach("dblclick",this.handleDblClick,this))},_uiSetFocusable:function(a){var c=this.getKeyEventTarget();a?(c.on("focus",this.handleFocus,this),c.on("blur",this.handleBlur,this),c.on("keydown",this.handleKeydown,this)):
(c.detach("focus",this.handleFocus,this),c.detach("blur",this.handleBlur,this),c.detach("keydown",this.handleKeydown,this))},getContentElement:function(){var a=this.get("view");return a&&a.getContentElement()},getKeyEventTarget:function(){var a=this.get("view");return a&&a.getKeyEventTarget()},addChild:function(a,c){var b=this.get("children"),e=null;void 0!==c?(b.splice(c,0,a),e=b[c]||null):b.push(a);i(this,a,e)},removeChild:function(a,c){var b=this.get("children"),e=f.indexOf(a,b);-1!=e&&b.splice(e,
1);c&&a.destroy();return a},removeChildren:function(a){var c,b=[].concat(this.get("children"));for(c=0;c<b.length;c++)this.removeChild(b[c],a);this.__set("children",[])},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){if(this.get("disabled"))return!0;this.performActionInternal(a)},handleMouseOver:function(a){var c=this.get("el");if(this.get("disabled"))return!0;k(a,c)||this.handleMouseEnter(a)},handleMouseOut:function(a){var c=this.get("el");if(this.get("disabled"))return!0;
k(a,c)||this.handleMouseLeave(a)},handleMouseEnter:function(){if(this.get("disabled"))return!0;this.set("highlighted",!0)},handleMouseLeave:function(){if(this.get("disabled"))return!0;this.set("active",!1);this.set("highlighted",!1)},handleMouseDown:function(a){var c=1==a.which;if(this.get("disabled"))return!0;c&&!this.get("disabled")&&(c=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",!0),this.get("focusable")?(c[0].focus(),this.set("focused",!0)):(c=(c=a.target.nodeName)&&c.toLowerCase(),
"input"!=c&&"textarea"!=c&&a.preventDefault()))},handleMouseUp:function(a){if(this.get("disabled"))return!0;this.get("active")&&1==a.which&&(this.performActionInternal(a),this.set("active",!1))},handleFocus:function(){this.set("focused",!0)},handleBlur:function(){this.set("focused",!1)},handleKeyEventInternal:function(a){if(a.keyCode==d.KeyCodes.ENTER)return this.performActionInternal(a)},handleKeydown:function(a){if(this.get("disabled"))return!0;this.handleKeyEventInternal(a)&&a.halt()},performActionInternal:function(){},
destructor:function(){var a,c=this.get("children");for(a=0;a<c.length;a++)c[a].destroy();(a=this.get("view"))&&a.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{view:!0,value:!0},activeable:{value:!0},focused:{view:!0},active:{view:!0},highlighted:{view:!0},children:{value:[]},prefixCls:{view:!0,value:"ks-"},parent:{},view:{},disabled:{view:!0}},DefaultRender:e},"Component_Controller");return l},{requires:["event","uibase","./uistore","./render"]});
KISSY.add("component/decorateChild",function(f,d){function b(){}f.augment(b,d,{decorateInternal:function(a){this.set("el",a);var b=this.get("decorateChildCls");if(a=a.one("."+this.getCssClassWithPrefix(b)))(b=this.findUIConstructorByNode(a))?this.decorateChildrenInternal(b,a):this.decorateChildren(a)}});return b},{requires:["./decorateChildren"]});
KISSY.add("component/decorateChildren",function(f,d){function b(){}f.augment(b,{decorateInternal:function(a){this.set("el",a);this.decorateChildren(a)},findUIConstructorByNode:function(a){var a=a.attr("class")||"",b=this.get("prefixCls"),a=a.replace(RegExp("\\b"+b,"ig"),"");return d.getUIConstructorByCssClass(a)},decorateChildrenInternal:function(a,b){this.addChild(new a({srcNode:b,prefixCls:this.get("prefixCls")}))},decorateChildren:function(a){var b=this;a.children().each(function(a){var d=b.findUIConstructorByNode(a);
b.decorateChildrenInternal(d,a)})}});return b},{requires:["./uistore"]});
KISSY.add("component/delegateChildren",function(f){function d(){}f.augment(d,{__bindUI:function(){this.get("el").on("mousedown mouseup mouseover mouseout dblclick",this._handleChildMouseEvents,this)},_handleChildMouseEvents:function(b){var a=this.getOwnerControl(b.target);if(a)switch(b.type){case "mousedown":a.handleMouseDown(b);break;case "mouseup":a.handleMouseUp(b);break;case "mouseover":a.handleMouseOver(b);break;case "mouseout":a.handleMouseOut(b);break;case "dblclick":a.handleDblClick(b)}},
getOwnerControl:function(b){for(var a=this.get("children"),e=a.length,d=this.get("el")[0];b&&b!==d;){for(var f=0;f<e;f++)if(a[f].get("el")[0]===b)return a[f];b=b.parentNode}return null}});return d});
KISSY.add("component/render",function(f,d,b){return d.create([d.Box.Render],{getComponentCssClassWithState:function(a){var b=this.__componentClasses,a=a||"";return this.getCssClassWithPrefix(b.split(/\s+/).join(a+" ")+a)},getCssClassWithPrefix:b.getCssClassWithPrefix,createDom:function(){this.get("el").addClass(this.getComponentCssClassWithState())},getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},_uiSetFocusable:function(a){var b=
this.getKeyEventTarget(),d=b.attr("tabindex");0<=d&&!a?b.attr("tabindex",-1):!(0<=d)&&a&&b.attr("tabindex",0)},_uiSetHighlighted:function(a){var b=this.getComponentCssClassWithState("-hover");this.get("el")[a?"addClass":"removeClass"](b)},_uiSetDisabled:function(a){var b=this.getComponentCssClassWithState("-disabled");this.get("el")[a?"addClass":"removeClass"](b).attr({tabindex:a?-1:0,"aria-disabled":a})},_uiSetActive:function(a){var b=this.getComponentCssClassWithState("-active");this.get("el")[a?
"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_uiSetFocused:function(a){var b=this.get("el"),d=this.getComponentCssClassWithState("-focused");b[a?"addClass":"removeClass"](d)}},{ATTRS:{prefixCls:{},focusable:{},focused:{},active:{},disabled:{},highlighted:{}}},"Component_Render")},{requires:["uibase","./uistore"]});
KISSY.add("component/uistore",function(f){var d={};return{getCssClassWithPrefix:function(b){for(var b=f.trim(b).split(/\s+/),a=0;a<b.length;a++)b[a]&&(b[a]=this.get("prefixCls")+b[a]);return b.join(" ")},getCssClassByUIConstructor:function(b){for(var a in d)if(d[a].ui==b)return a;return 0},getUIConstructorByCssClass:function(b){for(var b=b.split(/\s+/),a=null,e=0;e<b.length;e++){var f=d[b[e]];f&&-1<f.priority&&(a=f.ui)}return a},setUIConstructorByCssClass:function(b,a){d[b]=a},PRIORITY:{LEVEL1:10,
LEVEL2:20,LEVEL3:30,LEVEL4:40,LEVEL5:50,LEVEL6:60}}});
